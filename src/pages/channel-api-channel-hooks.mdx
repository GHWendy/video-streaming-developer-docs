---
title: Channel hooks
description: Channel hooks
---

## Get started with hooks

Hooks can be registered for different channel events. When a channel event is fired, an HTTP POST request is sent to the registered hook recipient URL.

You can use to these endpoints with [Client Credentials](/api-basics-overview).

### Supported events

| EVENT                   | DESCRIPTION                                                |
| ----------------------- | ---------------------------------------------------------- |
| `channel.status.live`   | A channel goes live                                        |
| `channel.status.offair` | A channel goes off-air                                     |
| `video.create`          | A video has been created (uploaded, recorded) on a channel |
| `video.deleted`         | A video has been deleted from a channel                    |

### Handshake method

A newly registered hook is inactive by default. In order to make it active, a basic handshake must be implemented at the recipient URL before the hook registration.
After the hook was registered, a POST request is sent to the recipient URL with a `X-Hook-Secret` HTTP header. Recipients must reply to this request with the same secret string in their `X-Hook-Secret` response header to make sure that the registered recipient URL is owned by the API user. This handshake request will also contain an `event` and `channelId` in the body (JSON encoded) property with the corresponding values of your freshly registered hook. Using these values you can re-use the same hook to handle multiple secrets based on these identifiers.

### Handshake example

Your app needs to be notified about the channel that has the ID “123” whenever it goes live, so the app initiates a new hook.

```
POST /channels/123/hooks/channel.status.live.json HTTP/1.1
Host: api.video.ibm.com
Authorization: Bearer 782f6544405a22636f3d5d3b63c2573673bf3950
Content-Type: application/x-www-form-urlencoded
recipient=http://your-app.url/hook-receiver
```

If everything went smoothly, your app will get simply:

```
HTTP/1.1 204 No Content
```

Asynchronously, the handshake mechanism will start promptly, our hook server will call your hook to exchange a secret.

```
POST /hook-receiver HTTP/1.1
Host: your-app.url
Content-Type: application/json
Content-Length: 46
X-Hook-Secret: open-sesame!

{
	"event": "channel.status.live",
	"channelId": 123
}
```

Your hook implementation should store that secret and echo the X-Hook-Secret header in the response.

```
HTTP/1.1 200 OK
Content-Length: 0
X-Hook-Secret: open-sesame!
```

## Register a channel hook

Register a hook for a channel event. ([See supported events](#supported-events).)

```
PUT https://api.video.ibm.com/channels/{channel_id}/hooks/{event}.json
```

### Parameters

The parameters for the PUT request:

| PARAMETER   | TYPE   | IMPORTANCE | DESCRIPTION                                        |
| ----------- | ------ | ---------- | -------------------------------------------------- |
| `recipient` | string | REQUIRED   | The URL where the event notifications will be sent |

### Success response

On success, a response with HTTP status “204 No Content” is returned.

### Error responses

Possible error responses:

| HTTP RESPONSE CODE      | ERROR VALUE         | ERROR CONDITIONS                                                                        |
| ----------------------- | ------------------- | --------------------------------------------------------------------------------------- |
| 400 Bad Request         | `bad_request`       | Some of the parameters are invalid                                                      |
| 401 Unauthorized        | `invalid_token`     | The provided access token is missing, revoked, expired or malformed                     |
| 403 Forbidden           | `lack_of_ownership` | The API user is not allowed to manage the given channel                                 |
| 404 Not Found           | `not_found`         | Channel was not found                                                                   |
| 503 Service Unavailable |                     | There is a temporary error on the server which makes it impossible to serve the request |

## Get channel hook details

Returns information on a previously registered hook. ([See supported events](#supported-events).)

```
GET https://api.video.ibm.com/channels/{channel_id}/hooks/{event}.json
```

### Parameters

This request has no parameters.

### Success response

On success a response with HTTP status “200 OK” is returned with the following key-value pairs.

| KEY         | TYPE   | DESCRIPTION                                   |
| ----------- | ------ | --------------------------------------------- |
| `recipient` | string | The hook recipient URL                        |
| `status`    | string | Possible values: pending, active or suspended |

### Error responses

Possible error responses:

| HTTP RESPONSE CODE      | ERROR VALUE    | ERROR CONDITIONS                                                                        |
| ----------------------- | -------------- | --------------------------------------------------------------------------------------- |
| 401 Unauthorized        | `unauthorized` | The provided access token is missing, revoked, expired or malformed                     |
| 404 Not Found           | `not_found`    | Channel or hook was not found                                                           |
| 503 Service Unavailable |                | There is a temporary error on the server which makes it impossible to serve the request |

## Delete a channel hook

Delete a previously registered hook. ([See supported events](#supported-events).)

```
DELETE https://api.video.ibm.com/channels/{channel_id}/hooks/{event}.json
```

### Parameters

This request has no parameters.

### Success response

On success a response with HTTP status “200 OK” is returned with the following key-value pairs.

| KEY         | TYPE   | DESCRIPTION                                   |
| ----------- | ------ | --------------------------------------------- |
| `recipient` | string | The hook recipient URL                        |
| `status`    | string | Possible values: pending, active or suspended |

### Error responses

Possible error responses:

| HTTP RESPONSE CODE      | ERROR VALUE    | ERROR CONDITIONS                                                                        |
| ----------------------- | -------------- | --------------------------------------------------------------------------------------- |
| 401 Unauthorized        | `unauthorized` | The provided access token is missing, revoked, expired or malformed                     |
| 404 Not Found           | `not_found`    | Channel or hook was not found                                                           |
| 503 Service Unavailable |                | There is a temporary error on the server which makes it impossible to serve the request |

## Receiving webhook events

On an event triggered interested by you, our hook server will call your receiver:

```
POST /hook-receiver HTTP/1.1
Host: your-app.url
Content-Type: application/json
Content-Length: 76
X-Hook-Signature: 61f34d324ac51dde1288825dab2111
```

#### Channel event example

```
{
	"event": "channel.status.live",
	"channelId": 123
}
```

#### Video event example
```
{
	"event": "video.create",
	"videoId": 456
}
```

Your receiver should verify the signature provided in the request **X-Hook-Signature** header, using **HMAC-SHA1** algorithm with the previously exchanged secret and the full request body as-is
